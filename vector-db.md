# Vector DB

## Fundamentals

- simplify data storage, organization and retrieval of complex data types, including image, likes, sound, text files,
  pattern data, map data, genomic information, and others.
- can use vector database for analysis tasks that group items, classify items, and suggest relationship among others.
- an integral part of machine learning and for data in diverse domains, and offer high performance and scalability
    - Biology: Analysis of climate data
    - HealthCare: Calculating patients outcome
    - ECommerce: Delivering product recommendations
    - Social Media: Sharing social connection suggestions
    - Traffic Planning: Traffic Analysis
- stores data as mathematical objects defined by size and direction
- use distributed computing, indexing and parallel processing techniques to quickly manage big data sets and process
  queries.

## Types

- includes in-memory, disk-based, distributed, graph-based and time-based databases
- speed performance for recommendations systems, social network analysis, knowledge graphs and other complex tasks
- use unique data structures, reversed indexes, product quantization, and locality-sensitive hashing (LSH) that provide
  scalability, deliver speed and enhance customization
- databases that support vector search are either regular database systems or data processing frameworks that let you
  store data as BLOB's, array, or user-defined types
- vendors that support vector search includes SingleStore with its support, ElasticSearch, PostgresSQL, RediaAI, and
  Apache Cassandra

## Applications

### Image and Video Analysis

| Task                                          | Vector database capability                                | Uses                                                                                                    |
|-----------------------------------------------|-----------------------------------------------------------|---------------------------------------------------------------------------------------------------------|
| Perform feature extraction and representation | Store high-dimensional feature vectors                    | Displays aspects of images, such as color histograms, texture descriptions, or deep learning embeddings |
| Similarity searches                           | Store feature vectors                                     | Locate images, summarize videos, and suggest images and videos based on content                         |
| Process real-time data                        | Provide horizontal scalability for real-time data storage | Perform video surveillance, object recognition, and live event analysis                                 |

### Recommendation Systems

| Task                                            | Vector database capability                                                                                       | Uses                                                                                                                |
|-------------------------------------------------|------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------|
| Embedding storage and nearest neighbor search   | Incorporate embeddings or numerical representations of items or entities generated by a recommendation system    | Access the vector’s likes and traits<br>Locate the vector’s closest neighbors for improved personalized suggestions |
| Deliver performance improvement and scalability | Provide scalability to handle additional searches and vectors<br>Improve query processing and indexing structure | Deliver fast, scalable recommendation services for large numbers of concurrent users                                |
| Provide cross-domain suggestions                | Stores embeddings and carry out cross-domain suggestions                                                         | Enhance the completeness of recommendation systems                                                                  |

### Geospatial analysis and location-based services

| Task                                   | Vector database capabilities                                                                                      | Uses                                                                                                                            |
|----------------------------------------|-------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------|
| Efficiently store and index data       | - Use indexing methods like R-tree or quadtree<br>- Store geospatial data like addresses, polygons, GPS locations | Deliver spatial queries, like closeness searches, range queries, and spatial joins, for GPS information and other mapping needs |
| Provide location-based suggestions     | - Combine geospatial data with user preferences and location                                                      | Deliver recommendations for nearby events, services, and places of interest                                                     |
| Deliver real-time geospatial analytics | - Process streaming data in real-time<br>- Groups items together spatially<br>- Recognizes spatial patterns       | Power apps like tracking vehicles, managing fleets, dynamic routing, finding hotspots                                           |

### Marketing and social media insights

| Task                                                                           | Vector database capability                              | Uses                                                                                              |
|--------------------------------------------------------------------------------|---------------------------------------------------------|---------------------------------------------------------------------------------------------------|
| Provide distributed storage and parallel processing for horizontal scalability | Spread data and queries across multiple nodes or groups | Process big data and handle simultaneous queries such as SEO calculations                         |
| Reduce latency and boost overall speed                                         | Use optimized caching and query execution plans         | Obtain trending analytics faster                                                                  |
| Adjust to changing task needs                                                  | Support auto-scaling and dynamic resource allocation    | Your company can scale hardware and cloud resource usage for the best performance and lower costs |

### Popular Algorithms

- **KNN** (K-Nearest Neighbors): is a commonly used classification and regression algorithm. Suppose a classification
  task receives a training dataset and a new input instance. The task finds the K instances in the training dataset that
  are closest to the instance. If most of these K instances belong to a certain class, then the input instance is
  classified as this class.
- **ANN** (Approximate Nearest Neighbors): is an algorithm for finding approximate nearest neighbors in large datasets.
  Unlike the KNN algorithm, which finds the exact nearest neighbors, the ANN algorithm only finds approximate nearest
  neighbors. Both KNN and ANN are algorithms based on distance measurements to find the nearest neighbors. KNN finds the
  exact nearest neighbors, while ANN finds the approximate nearest neighbors. ANN can significantly improve search
  efficiency then KNN when dealing with massive data, especially in high-dimensional space searches.
- **HNSW** (Hierarchical Navigable Small World): During indexing, HNSW creates extra data structures for faster search,
  organizing data points into a hierarchical graph structure. HNSW has several configuration parameters that can be
  tuned to achieve the objectives for your search application. Like throughput, latency, and recall. For example, at
  query time, you can specify options for exhaustive search, even if the vector field is indexed for HNSW.

### Concept of Distances
- Euclidean (L2) - shortest distance between two vectors
- Manhattan (L1) - measures distance between two vectors only if you can move along the dimension of your data.
- Cosine - how similar the directions are and doesn't care about the length of the vector
- Dot Product - how different two vectors are

## LLMs

### ChromaDB

- [ChromaDB Docs](https://docs.trychroma.com/docs/overview/getting-started)
- Informational biases, information inaccuracy and hurdles in understanding basic data are some of the limitations that
  can occur with large language models
- In ChromaDB, you can use the vector object's dimensions to identify characteristics that result in similarities and
  differences
- ChromaDB architecture progressively applies the following phases:
    - Obtain embeddings - convert text, images, or data into numerical formats, which are vector representations
    - Create collections - similar to creating tables
    - Store information within the collections - place information including text and embeddings in collections
    - Apply collection operations
    - Query and group data

#### What is a collection?

- Stores vector embedding
- Holds documents
- Manages metadata

#### What is an embedding?

In natural language processing, words are represented as vectors in a high-dimensional space, where each dimension of
the space corresponds to a specific aspect or feature of the word's meaning. For example, dimensions might represent
things like context, semantics, or syntax.

The procedure to generate the vectors from words is called embeddings. Embeddings capture semantic relationships between
words or documents by mapping them to continuous vector representations. In such a way, similar words or documents are
closer together in the vector space.

- Consists of a fixed length list of numbers
- Captures the meaning and relationship
- Each number represents a dimension or characteristics
- An embedding is a complete set of numbers related to the document
- The collection analyses embedding to evaluate the similarity of items or objects within the collection

### Similarity search purposes

- Exists as a fundamental information retrieval and data analysis operation
- In context-dependent
- Locates similar items in a data set

| Type of Similarity Search | Description                                                                                                                                                                                                                             |
|---------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Text Document             | Compare documents to find semantically or syntactically similar documents or text snippets <br><br/> Use vector embeddings, including word and document embeddings                                                                      |
| Image and Video           | Uses likeness searches to help find similar images or videos <br> Finds similar images by comparing features, including histograms <br> Using deep neural network embeddings                                                            |
| Structured Data           | Examines artifacts such as database and their tabular data <br> Locates rows and records <br> Matches the query based on attribute values <br> Uses Euclidean distance for numerical traits <br> Distance calculations for text strings |
| Recommendations Systems   | Locate movies, books, and other items <br>                                                                                                                                                                                              |
| Genome and bioinformatics | Locate duplicate DNA, RNA and Protein sequences                                                                                                                                                                                         |

### Cassandra

- [Cassandra quick start](https://cassandra.apache.org/doc/latest/cassandra/getting-started/vector-search-quickstart.html)

### Postgres

- `pg-vector` extension for vector data storage, installs on top of the server.
- `CREATE EXTENSION IF NOT EXISTS vector`

#### Use Case

- Extract all the blogs and create an embedding
- Have a table with columns `id, slug, title and embeddings`
- Suppose we want to show all the related articles to the user

```sql
select *
from articles
where id!=20 -- this is the article that the user is currently on
order by embedding <-> (select embedding from articles where id=20)
```

## References

- [Microsoft - Understanding Vector Databases](assets/data/data-engineering-playbook.pdf)



